<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Retrofitting · Liquibase Linter</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Using Liquibase Linter in a brand new project is pretty straightforward, but more often than not you&#x27;ll be retrofitting it to an existing project with a history of changes. It&#x27;s likely that many of those changes would not pass the set of rules you are applying, but since changes are supposed to be immutable, fixing them retrospectively is not really an option."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Retrofitting · Liquibase Linter"/><meta property="og:type" content="website"/><meta property="og:url" content="https://whiteclarkegroup.github.io/liquibase-linter/"/><meta property="og:description" content="Using Liquibase Linter in a brand new project is pretty straightforward, but more often than not you&#x27;ll be retrofitting it to an existing project with a history of changes. It&#x27;s likely that many of those changes would not pass the set of rules you are applying, but since changes are supposed to be immutable, fixing them retrospectively is not really an option."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/liquibase-linter/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/ocean.min.css"/><link rel="alternate" type="application/atom+xml" href="https://whiteclarkegroup.github.io/liquibase-linter/blog/atom.xml" title="Liquibase Linter Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://whiteclarkegroup.github.io/liquibase-linter/blog/feed.xml" title="Liquibase Linter Blog RSS Feed"/><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato"/><script type="text/javascript" src="//buttons.github.io/buttons.js"></script><script src="/liquibase-linter/js/scrollSpy.js"></script><link rel="stylesheet" href="/liquibase-linter/css/main.css"/><script src="/liquibase-linter/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/liquibase-linter/"><h2 class="headerTitle">Liquibase Linter</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/liquibase-linter/docs/install" target="_self">Setup</a></li><li class="siteNavGroupActive"><a href="/liquibase-linter/docs/rules/" target="_self">Rules</a></li><li class=""><a href="/liquibase-linter/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/whiteclarkegroup/liquibase-linter" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Setup</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Setup</h3><ul class=""><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/install">Install</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/configure">Configure</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/liquibase-linter/docs/retrofitting">Retrofitting</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Rules</h3><ul class=""><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/">Using Rules</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Custom Rules</h4><ul><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/custom-rules">Implementing a Custom Rule</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Core Rules</h4><ul><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/create-column-no-define-primary-key">create-column-no-define-primary-key</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/create-column-nullable-constraint">create-column-nullable-constraint</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/create-column-remarks">create-column-remarks</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/create-index-name">create-index-name</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/create-table-remarks">create-table-remarks</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/drop-not-null-require-column-data-type">drop-not-null-require-column-data-type</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/file-name-no-spaces">file-name-no-spaces</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/file-not-included">file-not-included</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/foreign-key-name">foreign-key-name</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/has-comment">has-comment</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/has-context">has-context</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/illegal-change-types">illegal-change-types</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/isolate-ddl-changes">isolate-ddl-changes</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/modify-data-enforce-where">modify-data-enforce-where</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/modify-data-starts-with-where">modify-data-starts-with-where</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/no-duplicate-includes">no-duplicate-includes</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/no-preconditions">no-preconditions</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/no-schema-name">no-schema-name</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/no-raw-sql">no-raw-sql</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/object-name">object-name</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/object-name-length">object-name-length</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/primary-key-name">primary-key-name</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/schema-name">schema-name</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/separate-ddl-context">separate-ddl-context</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/table-name">table-name</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/table-name-length">table-name-length</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/unique-constraint-name">unique-constraint-name</a></li><li class="navListItem"><a class="navItem" href="/liquibase-linter/docs/rules/valid-context">valid-context</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Retrofitting</h1></header><article><div><span><p>Using Liquibase Linter in a brand new project is pretty straightforward, but more often than not you'll be retrofitting it to an existing project with a history of changes. It's likely that many of those changes would not pass the set of rules you are applying, but since changes are supposed to be immutable, fixing them retrospectively is not really an option.</p>
<p>Liquibase Linter provides some extra configuration options to help with this.</p>
<h2><a class="anchor" aria-hidden="true" id="enable-after-at-project-level"></a><a href="#enable-after-at-project-level" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>enable-after</code> at project level</h2>
<p>This config option allows you to specify a point in time (a change log file) <em>after</em> which you want lint rules to be run. This would typically be the last change log before you add Liquibase Linter and turn on the rules.</p>
<p>Take this example configuration and change log:</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"enable-after"</span>: <span class="hljs-string">"src/main/resources/example-1.xml"</span>,
    <span class="hljs-attr">"rules"</span>: {}
}
</code></pre>
<pre><code class="hljs css language-xml"><span class="hljs-comment">&lt;!-- root change log file --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">databaseChangeLog</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.liquibase.org/xml/ns/dbchangelog"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">relativeToChangelogFile</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">file</span>=<span class="hljs-string">"example-1.xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">relativeToChangelogFile</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">file</span>=<span class="hljs-string">"example-2.xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">relativeToChangelogFile</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">file</span>=<span class="hljs-string">"example-3.xml"</span>/&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">databaseChangeLog</span>&gt;</span>
</code></pre>
<p>Since we've called out <code>example-1.xml</code> as our <code>enable-after</code> change log, the linter will start checking from <code>example-2.xml</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="enableafter-at-rule-level"></a><a href="#enableafter-at-rule-level" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>enableAfter</code> at rule level</h2>
<p>Over time you'll probably want to add new rules to your project -- but again there may be historical changes that would fail if you just drop them in. For this, you can specify <code>enableAfter</code> at rule level.</p>
<p>It works the same way as the root-level one; the value is a change log file name which marks the point in time after which you want the rule to be checked. For example:</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"rules"</span>: {
        <span class="hljs-attr">"has-context"</span>: {
            <span class="hljs-attr">"enableAfter"</span>: <span class="hljs-string">"last-changeset-before-contexts-became-mandatory.xml"</span>        
        }   
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/liquibase-linter/docs/configure"><span class="arrow-prev">← </span><span>Configure</span></a><a class="docs-next button" href="/liquibase-linter/docs/rules/index"><span>Using Rules</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#enable-after-at-project-level"><code>enable-after</code> at project level</a></li><li><a href="#enableafter-at-rule-level"><code>enableAfter</code> at rule level</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/liquibase-linter/docs/en/install">Setup</a><a href="/liquibase-linter/docs/en/rules/index">Rules</a></div><div><h5>Code</h5><a href="https://github.com/whiteclarkegroup/liquibase-linter">GitHub</a><a href=""><img alt="Travis Build" src="//travis-ci.org/whiteclarkegroup/liquibase-linter.svg?branch=master"/></a><a href=""><img alt="Codacy Quality" src="//api.codacy.com/project/badge/Grade/320a8a4be4fd44feb9d6102ccdc7e240"/></a></div><div><h5>More</h5><a href="/liquibase-linter/blog">Blog</a></div></section><a href="https://www.whiteclarkegroup.com/" target="_blank" rel="noopener" class="fbOpenSource"><img src="/liquibase-linter/img/wcg-logo.svg" alt="White Clarke Group"/></a><section class="copyright">Copyright © 2020 White Clarke Group</section></footer></div></body></html>